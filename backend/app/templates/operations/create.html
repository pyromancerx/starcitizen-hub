{% extends "base.html" %}

{% block title %}New Operation - {{ instance_name }}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <div class="md:flex md:items-center md:justify-between mb-6">
        <div class="min-w-0 flex-1">
            <h1 class="text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight">
                Plan New Operation
            </h1>
        </div>
    </div>

    <form action="/operations/new" method="POST" class="space-y-6">
        <input type="hidden" name="csrf-token" value="{{ csrf_token }}">

        <div class="bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden">
            <div class="px-4 py-5 sm:p-6 space-y-4">
                <div>
                    <label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title</label>
                    <input type="text" name="title" id="title" required
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                           placeholder="Operation Golden Sunder">
                </div>

                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div>
                        <label for="type" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Type</label>
                        <select name="type" id="type" required
                                class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm">
                            {% for op_type in operation_types %}
                            <option value="{{ op_type.value }}">{{ op_type.value|title }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label for="status" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Status</label>
                        <select name="status" id="status" required
                                class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm">
                            <option value="planning">Planning</option>
                            <option value="recruiting" selected>Recruiting</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div>
                        <label for="scheduled_at" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Date & Time (UTC)</label>
                        <input type="datetime-local" name="scheduled_at" id="scheduled_at" required
                               class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm">
                    </div>
                    <div>
                        <label for="estimated_duration" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Estimated Duration (mins)</label>
                        <input type="number" name="estimated_duration" id="estimated_duration" value="120"
                               class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm">
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div>
                        <label for="max_participants" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Max Participants</label>
                        <input type="number" name="max_participants" id="max_participants"
                               class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                               placeholder="Unlimited">
                    </div>
                </div>

                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
                    <textarea name="description" id="description" rows="4"
                              class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                              placeholder="Brief overview of the mission goals..."></textarea>
                </div>

                <div>
                    <label for="requirements" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Requirements</label>
                    <textarea name="requirements" id="requirements" rows="2"
                              class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                              placeholder="Required gear, ships, or skills..."></textarea>
                </div>

                <div>
                    <label for="required_roles" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Required Roles (comma-separated)</label>
                    <input type="text" name="required_roles" id="required_roles"
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                           placeholder="e.g., Pilot, Gunner, Engineer">
                    <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                        Specify roles needed for this operation, separated by commas.
                    </p>
                </div>

                <div>
                    <label for="required_ship_types" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Required Ship Types (comma-separated)</label>
                    <input type="text" name="required_ship_types" id="required_ship_types"
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-sc-blue focus:ring-sc-blue sm:text-sm"
                           placeholder="e.g., Fighter, Hauler, Capital">
                    <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                        Specify types of ships needed, separated by commas.
                    </p>
                </div>
            </div>
            <div class="px-4 py-3 bg-gray-50 dark:bg-gray-700/50 text-right sm:px-6">
                <a href="/operations" class="inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 py-2 px-4 text-sm font-medium text-gray-700 dark:text-white shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-sc-blue focus:ring-offset-2 mr-3">
                    Cancel
                </a>
                <button type="submit"
                        class="inline-flex justify-center rounded-md border border-transparent bg-sc-blue py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-sc-blue focus:ring-offset-2">
                    Create Operation
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}
